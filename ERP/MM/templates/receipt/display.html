<!DOCTYPE html>
<html lang="en">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <head>Material Search</head>
  <body>
    <form id="material1">
        {% comment %} 创建者编码 {% endcomment %}
        <input type="text" placeholder="请输入" onclick="openInsertModal()" id="cjzcode">
        
        {% comment %} 收据编号 {% endcomment %}
        <input type="text" placeholder="请输入" id="sjcode">

        {% comment %} 创建日期 {% endcomment %}
        <input type="text" id="my-input">
        <input type="submit">
    <table >
        <thead>
        <tr>
            <th>收据编码</th>
            <th>采购订单编码</th>
            <th>条目编码</th>
            <th> 商品名称</th>
            <th> 数量</th>
            <th> 实收数量</th>
            <th>创建时间</th>
            <th>查看详情</th>
        
        </tr>
        </thead>
        <tbody id="searchDiv"></tbody>
        {% comment %} <tbody>
        <tr>
            <td >00001</td>
            <td>拖拉机</td>
            <td>填商品编码</td>
            <td>001</td>
            <td>填总价</td>
            <td>填供应商编码</td>
            <td>001</td>
            <td><a href=""> <button class="btn btn-success btn-xs"><i class="fa fa-search-plus"></i></button></a></td>
        </tr>
        </tbody> {% endcomment %}
    </table>
    <textarea id="item_result"></textarea>
    <script>
        //收据搜索 不限制三项内容是否填写默认返回全部
                $('#material1').on('submit', function(e) {
                    e.preventDefault();
                    $.ajax(
                    {
                        type: "POST",
                        url: "{% url 'MM:ajax_search_receipt' %}",
                        data:{
                            dataType: "json",
                            csrfmiddlewaretoken: '{{ csrf_token }}',
                            //输入三个搜索框的值
                            uid: $("#cjzcode").val(),
                            pk: $("#sjcode").val(),
                            date: $("#my-input").val(),
                        },
                        success: function(data) {
                            $('#item_result').text(data);
                            // var dataObj = eval("("+data+")");
                            
                            // for(i = 0; i < dataObj.length; i++) {
                            //     //dataObj[i].fields.xx
                                
                            //     out += '<tr><td id="itempk'+i+'">'+ 收据编码+ '</td><td>' + 采购订单编码 + '</td><td>' 
                            //         + 条目编码+ '</td><td>' + 商品名称+ '</td><td>'+ 数量+ '</td><td>'+ 实收数量+ '</td><td>'+ 创建时间 +
                            //                 '</td><td><a href=""> <button class="btn btn-success btn-xs"><i class="fa fa-search-plus"></i></button></a></td></tr>';
                            // }
                            // document.getElementById("searchDiv").innerHTML=out;
                        },
                        failure: function() {

                        }
                    })
                });
            </script>
                    

  </body>
</html>
